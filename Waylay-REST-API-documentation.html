<html lang="en">

<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Waylay.io Documentation</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/jquery-ui.css" rel="stylesheet">
    <link href="css/jquery.tocify.css" rel="stylesheet">
    <link href="css/prettify.css" type="text/css" rel="stylesheet" />
        <link href="css/freelancer.css" rel="stylesheet">
    
    <link rel="icon" type="image/png" href="http://www.waylay.io/favicon.png">
    </head>

    <body id="page-top" class="index">
        
        
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top" style="padding: 0;">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
<!--                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>-->
                <a class="navbar-brand" href="http://docs.waylay.io/">docs.waylay.io</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div id="navigation">
                <ul class="nav navbar-nav navbar-right">
                    <li class="page-scroll selected">
                    <a href="#">Please select</a>
                    </li>
                    <li class="page-scroll">
                        <a href="Waylay-REST-API-documentation.html">REST API</a>
                    </li>
                    <li class="page-scroll">
                        <a href="Plugin-API.html">Sensors & Actuators</a>
                    </li>
                    <li class="page-scroll">
                        <a href="Submitting-and-fetching-data.html">Broker & Storage</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
        
        
        
        
        
        
        <div class="container-fluid">
        <div class="row-fluid" style="margin-top: 60px;">
        <div class="col-sm-3" style=" padding-left: 0; margin-left: -15px;">
        <div id="toc" class="tocify"></div>
        
        </div>
            <div class="col-sm-9"><h1 id="api-keys">API keys</h1>
<p>Before you can start using the REST API, you must visit your profile page in the waylay application and fetch your API keys:</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/waylayio/documentation/master/images/profile.png" class="img-responsive"  alt="enter image description here" />
<p class="caption">enter image description here</p>
</div>
<p>Once you have retrieved your keys, you can verify whether your keys and the REST server work E2E by issuing the following command:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/ping</code></pre>
<p>Note: you can test the same from the UI (see picture above), but since in the rest of the document we will be using curl command, the best is that you at this point in time do the same from the command line.</p>
<hr />
<h1 id="task-related-calls">TASK related calls</h1>
<h2 id="get-information-about-one-task">Get information about one task</h2>
<p>Response will include template definition and task’s type and settings.</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks/{taskID}</code></pre>
<h2 id="query-tasks">Query tasks</h2>
<p>You can also query more tasks and once using the following command:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks</code></pre>
<p>This call gives first 10 tasks (default behaviour), and if you need to filter your tasks, you can use a query language as defined below.</p>
<h3 id="query-interface">Query interface</h3>
<p>Query parameters are:</p>
<ul>
<li>name</li>
<li>resource</li>
<li>startIndex</li>
<li>stopIndex</li>
<li>hits (default 10, max. 100)</li>
</ul>
<p><em>All query parameters are combined with logical AND operator</em>. That means that if you combine more than one parameter together you will only receive tasks that match all conditions.</p>
<h4 id="query-by-name">Query by name</h4>
<p>You query task by a name using * characters to get a list of tasks that matches the input string. For instance in this call you can retrieve all tasks that start with <em>taskName</em>.</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks?name=&quot;taskName*&quot; </code></pre>
<p>If you query task by resource, input must match the resource name exactly. You can still receive more tasks in case they all have the same resource name.</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks?resource=&quot;resource1&quot; </code></pre>
<h4 id="query-by-task-index">Query by task index</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks?startIndex=1</code></pre>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks?startIndex=1&amp;stopIndex=5</code></pre>
<h4 id="using-the-hits">Using the hits</h4>
<p>Default number of hits is 10, and you can change this using <em>hits</em> parameter. For instance, this call will retrieve maximum 50 tasks, starting search from the task index 1.</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks?startIndex=1&amp;hits=50</code></pre>
<h4 id="get-the-total-count">Get the total count</h4>
<p>In order to retrieve the total task count, check the header of the response (X-Count). In this example, we receive back 27 tasks:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -I https://sandbox.waylay.io/api/tasks
HTTP/1.1 200 OK
Server: nginx/1.6.2
Date: Wed, 07 Jan 2015 10:50:32 GMT
Content-Type: application/json
Content-Length: 0
Connection: keep-alive
X-Count: 27
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, DELETE, PUT
Access-Control-Allow-Headers: Content-Type, Authorization
Access-Control-Expose-Headers: X-Count
Strict-Transport-Security: max-age=31536000; includeSubdomains</code></pre>
<h4 id="get-the-count-of-running-tasks">Get the count of running tasks</h4>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -I https://sandbox.waylay.io/api/tasks?status=&quot;running&quot;
HTTP/1.1 200 OK
Server: nginx/1.6.2
Date: Wed, 07 Jan 2015 10:50:32 GMT
Content-Type: application/json
Content-Length: 0
Connection: keep-alive
X-Count: 5
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, DELETE, PUT
Access-Control-Allow-Headers: Content-Type, Authorization
Access-Control-Expose-Headers: X-Count
Strict-Transport-Security: max-age=31536000; includeSubdomains</code></pre>
<h2 id="create-task">Create task</h2>
<h3 id="create-task-using-template-name">Create task using template name</h3>
<p>In order to start a task from the template, you need to provide the following inputs:</p>
<ul>
<li>name: task name</li>
<li>template: template name</li>
<li>resource: resource name</li>
<li>start: whether task is started after creation</li>
</ul>
<h4 id="cron-task">Cron task</h4>
<p>Cron specific input settings:</p>
<ul>
<li>type : scheduled</li>
<li>cron: cron expression as defined in <a href="http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger">Cron format</a></li>
</ul>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
  &quot;name&quot;: &quot;test1&quot;,
  &quot;template&quot;: &quot;internet.json&quot;,
  &quot;resource&quot;: &quot;hello&quot;,
  &quot;start&quot;: false,
  &quot;type&quot;: &quot;scheduled&quot;,
  &quot;cron&quot;: &quot;0/30 * * * * ?&quot;
}&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<h4 id="periodic-task">Periodic task</h4>
<p>Periodic specific input settings:</p>
<ul>
<li>type : periodic</li>
<li>frequency: polling frequency in miliseconds (default 10 seconds)</li>
<li>pollingFixedRate : fixed rate or fixed delay (default fixed false - meaning fixed delay)</li>
<li>resetObservations: whether to clear observation before next invocation (default true)</li>
<li>parallel: whether to run sensors in parallel or sequentially (default true, meaning parallel)</li>
</ul>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
  &quot;name&quot;: &quot;test2&quot;,
  &quot;template&quot;: &quot;internet.json&quot;,
  &quot;resource&quot;: &quot;hello&quot;,
  &quot;start&quot;: false,
  &quot;type&quot;: &quot;periodic&quot;,
  &quot;frequency&quot;: 1000
}&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<p>Note: in case that you set the task to run sequentially (parallel flag=false), order of sensor’s execution will be based on the cost of the sensor (from lower to higher).</p>
<h4 id="onetime-task">Onetime task</h4>
<p>Onetime specific input settings:</p>
<ul>
<li>type : onetime</li>
</ul>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
  &quot;name&quot;: &quot;test3&quot;,
  &quot;template&quot;: &quot;internet.json&quot;,
  &quot;resource&quot;: &quot;hello&quot;,
  &quot;type&quot;: &quot;onetime&quot;
}&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<h3 id="create-task-with-sensor-properties-in-the-request">Create task with sensor properties in the request</h3>
<p>You can also override sensor settings of the template before starting the task. In this example, we have changed the addresses of the Ping sensors:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{&quot;name&quot;: &quot;test4&quot;, &quot;template&quot;: &quot;internet.json&quot;, &quot;resource&quot;: &quot;hello&quot;, &quot;start&quot;: false, &quot;type&quot;: &quot;scheduled&quot;, &quot;cron&quot;: &quot;0/30 * * * * ?&quot;, &quot;nodes&quot;: [{&quot;name&quot;: &quot;Ping_1&quot;, &quot;properties&quot;: {&quot;sensor&quot;: {&quot;name&quot;: &quot;Ping&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;label&quot;: &quot;Ping_1&quot;, &quot;requiredProperties&quot;: [{&quot;address&quot;: &quot;www.waylay.io&quot;} ] } } }, {&quot;name&quot;: &quot;Ping_2&quot;, &quot;properties&quot;: {&quot;sensor&quot;: {&quot;name&quot;: &quot;Ping&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;label&quot;: &quot;Ping_2&quot;, &quot;requiredProperties&quot;: [{&quot;address&quot;: &quot;sandbox.waylay.io&quot;} ] } } }, {&quot;name&quot;: &quot;Ping_3&quot;, &quot;properties&quot;: {&quot;sensor&quot;: {&quot;name&quot;: &quot;Ping&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;label&quot;: &quot;Ping_3&quot;, &quot;requiredProperties&quot;: [{&quot;address&quot;: &quot;www.google.com&quot;} ] } } } ] }&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<h3 id="create-task-using-template-in-the-request">Create task using template in the request</h3>
<p>You can also start the task where template is defined in the request.</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{&quot;name&quot;: &quot;test1&quot;, &quot;type&quot;: &quot;onetime&quot;, &quot;resource&quot;: &quot;hello&quot;, &quot;network&quot;: {&quot;posterior&quot;: [{&quot;nodes&quot;: [&quot;CONNECTION&quot;, &quot;Google&quot;, &quot;My Machine&quot;, &quot;MIT&quot;], &quot;function&quot;: [1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1] } ], &quot;nodes&quot;: [{&quot;name&quot;: &quot;CONNECTION&quot;, &quot;states&quot;: [&quot;OK&quot;, &quot;NOK&quot;], &quot;properties&quot;: {&quot;position&quot;: [344, 367 ], &quot;comment&quot;: &quot;No comment&quot;, &quot;cost&quot;: 1 }, &quot;type&quot;: &quot;discrete&quot;, &quot;mode&quot;: &quot;explanation&quot;}, {&quot;priors&quot;: [0.5, 0.5 ], &quot;name&quot;: &quot;Google&quot;, &quot;states&quot;: [&quot;Alive&quot;, &quot;Not Alive&quot;], &quot;properties&quot;: {&quot;position&quot;: [146, 207 ], &quot;comment&quot;: &quot;No comment&quot;, &quot;cost&quot;: 1 }, &quot;type&quot;: &quot;discrete&quot;, &quot;mode&quot;: &quot;nature&quot;}, {&quot;priors&quot;: [0.5, 0.5 ], &quot;name&quot;: &quot;MIT&quot;, &quot;states&quot;: [&quot;Alive&quot;, &quot;Not Alive&quot;], &quot;properties&quot;: {&quot;position&quot;: [365, 55 ], &quot;comment&quot;: &quot;No comment&quot;, &quot;cost&quot;: 1 }, &quot;type&quot;: &quot;discrete&quot;, &quot;mode&quot;: &quot;nature&quot;}, {&quot;priors&quot;: [0.5, 0.5 ], &quot;name&quot;: &quot;My Machine&quot;, &quot;states&quot;: [&quot;Alive&quot;, &quot;Not Alive&quot;], &quot;properties&quot;: {&quot;position&quot;: [545, 170 ], &quot;comment&quot;: &quot;No comment&quot;, &quot;cost&quot;: 1 }, &quot;type&quot;: &quot;discrete&quot;, &quot;mode&quot;: &quot;nature&quot;} ], &quot;name&quot;: &quot;test&quot;} }&#39; https://sandbox.waylay.io/api/tasks</code></pre>
<h2 id="delete-task">Delete task</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X DELETE https://sandbox.waylay.io/api/tasks/1</code></pre>
<h2 id="start-and-stop-tasks">Start and stop tasks</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST https://sandbox.waylay.io/api/tasks/1/command/stop</code></pre>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST https://sandbox.waylay.io/api/tasks/1/command/start</code></pre>
<h1 id="node-related-calls">Node related calls</h1>
<h2 id="get-current-statesposteriors-and-raw-data-for-the-node">Get current states(posteriors) and raw data for the node</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks/759/nodes/Ping_1</code></pre>
<h2 id="get-supported-states-for-the-node">Get supported states for the node</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/tasks/759/nodes/Ping_1/states</code></pre>
<h2 id="set-the-state-for-the-node">Set the state for the node</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST  -d &#39;state=Alive&#39; https://sandbox.waylay.io/api/tasks/759/nodes/Ping_1</code></pre>
<h2 id="execute-sensor-attached-to-the-node">Execute sensor attached to the node</h2>
<p>At any time you can execute a sensor attached to the node. Please be aware that the state change will be inferred in that task right after the sensor execution. For instance, in this call below, we will execute Ping sensor on the task 759:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST  -d &#39;operation=start&#39; https://sandbox.waylay.io/api/tasks/759/nodes/Ping_1</code></pre>
<h1 id="templates">Templates</h1>
<h2 id="list-all-templates">List all templates</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/templates</code></pre>
<h2 id="get-one-template">Get one template</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/templates/internet.json</code></pre>
<h2 id="delete-template">Delete template</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X DELETE https://sandbox.waylay.io/api/templates/internet.json</code></pre>
<h2 id="submit-a-new-template">Submit a new template</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{ posterior: [ { nodes: [ &quot;CONNECTION&quot;, &quot;Ping_1&quot;, &quot;Ping_2&quot;, &quot;Ping_3&quot; ], function: [ 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0 ] } ], nodes: [ { states: [ &quot;OK&quot;, &quot;NOK&quot; ], name: &quot;CONNECTION&quot;, properties: { position: [ 497, 235 ], comment: &quot;created by waylay&quot;, cost: 1 }, type: &quot;discrete&quot;, mode: &quot;nature&quot; }, { states: [ &quot;Not Alive&quot;, &quot;Alive&quot; ], name: &quot;Ping_1&quot;, properties: { position: [ 214, 317 ], comment: &quot;created by waylay&quot;, cost: 1, sensor: { name: &quot;Ping&quot;, version: &quot;1.0.1&quot;, label: &quot;Ping_1&quot;, requiredProperties: [ { address: &quot;www.google.com&quot; } ] } }, type: &quot;discrete&quot;, mode: &quot;nature&quot;, priors: [ 0.5, 0.5 ] }, { states: [ &quot;Not Alive&quot;, &quot;Alive&quot; ], name: &quot;Ping_2&quot;, properties: { position: [ 144, 163 ], comment: &quot;created by waylay&quot;, cost: 1, sensor: { name: &quot;Ping&quot;, version: &quot;1.0.1&quot;, label: &quot;Ping_2&quot;, requiredProperties: [ { address: &quot;www.waylay.io&quot; } ] } }, type: &quot;discrete&quot;, mode: &quot;nature&quot;, priors: [ 0.5, 0.5 ] }, { states: [ &quot;Not Alive&quot;, &quot;Alive&quot; ], name: &quot;Ping_3&quot;, properties: { position: [ 359, 62 ], comment: &quot;created by waylay&quot;, cost: 1, sensor: { name: &quot;Ping&quot;, version: &quot;1.0.1&quot;, label: &quot;Ping_3&quot;, requiredProperties: [ { address: &quot;www.yahoo.com&quot; } ] } }, type: &quot;discrete&quot;, mode: &quot;nature&quot;, priors: [ 0.5, 0.5 ] } ], name: &quot;internet2.json&quot; }&#39; https://sandbox.waylay.io/api/templates</code></pre>
<h1 id="plugs">Plugs</h1>
<h2 id="sensors">Sensors</h2>
<h3 id="get-list-of-all-sensors">Get list of all sensors</h3>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/sensors</code></pre>
<h3 id="execute-sensor">Execute sensor</h3>
<p>You can test any sensor using REST. Of course, you will need to provide sensor specific parameters in the call, like in this example where we provide city name to the weather sensor:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{properties: {&quot;city&quot; : &quot;Gent&quot;}}&#39; https://sandbox.waylay.io/api/sensors/weatherSensor/versions/1.0.1</code></pre>
<h2 id="actuators">Actuators</h2>
<h2 id="get-list-of-all-actuators">Get list of all actuators</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/actions</code></pre>
<h3 id="execute-actuator">Execute actuator</h3>
<p>You can test any actuator using REST. Of course, you will need to provide actuator specific parameters in the call, like in this example where we provide e-mail address and message to mail actuator:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{properties: {&quot;address&quot; : &quot;veselin@waylay.io&quot;, &quot;subject&quot;:&quot;test&quot;, &quot;message&quot;: &quot;hello world&quot;}}&#39; https://sandbox.waylay.io/api/actions/Mail/versions/1.0.1</code></pre>
<h1 id="how-to-work-with-real-time-data">How to work with real-time data</h1>
<p>The waylay application allows you to push raw data and states to the running tasks.</p>
<h2 id="push-real-time-raw-data">Push real-time raw data</h2>
<p>If you need to process real time data in your sensors (like location, temperature etc.), you have two options:</p>
<ul>
<li>use configuration property (see the interface spec) and fetch the data at runtime in the execute call</li>
<li>ask the framework to provide you with real time data and fetch the data from the task context (during the execution call of the sensor).</li>
</ul>
<p>In case that real time data is provided to the sensors via the context (option 2), the plugin developer has put the responsibility of providing the real time data to the person that implements the REST call. That person could e.g. implement an MQTT to REST bridge to accomplish this. When making use of this REST call, you must use the resource parameter as the identifier of your device (or any other “thing”). This is the same resource identifier that is associated with the task when you create it. In this way, the waylay framework can link the pushed raw data and the tasks(and sensors) that require this data.</p>
<p>When tasks gets invoked, the framework will provide the pushed raw data to all tasks (and the sensors) that match the resource identifier. You can create as many tasks as you want using the same resource identifier. Here is a REST invocation call that pushes temperature:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
        resource: &quot;home_X_room1&quot;,
        data:{
          object:&quot;home_X_room1&quot;,
          type: {
            unit:&quot;C&quot;,
            dataType:&quot;double&quot;,
            collectedType: &quot;instant&quot;
          },
          parameterName: &quot;temperature&quot;,
          value: 23.0,
          collectedTime: 1420629467,
          validPeriodSecs:600
        }
      }&#39; https://sandbox.waylay.io/api/data</code></pre>
<p>Here is the app view where you can test this feature(designer in debug mode): <img src="https://raw.githubusercontent.com/waylayio/documentation/master/images/global.png" class="img-responsive"  /></p>
<p>You can also push several parameters at once, and you can as well skip most of the parameter’s attributes. For instance, with this call, we are pushing geolocation to the waylay platform, by specifying only longitude and latitude values. By default, waylay puts the <em>validPeriodSecs</em> of the parameter to 60 seconds, and <em>collectedTime</em> to the time the data was received:</p>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{ resource: &quot;datasource&quot;,  data: [{ parameterName: &quot;latitude&quot;, value: 51}, { parameterName: &quot;longitude&quot;, value: 3.73}] }&#39; https://sandbox.waylay.io/api/data</code></pre>
<p>For more information please check <em>Plugin SDK document</em>.</p>
<h2 id="pushing-states-to-the-task">Pushing states to the task</h2>
<p>For example, if you have a door with two states OPEN/CLOSED, you can push a state change from an external system to the task. There are 2 ways to do this:</p>
<ol style="list-style-type: decimal">
<li>You can inject the state directly to the particular node in the task (as described before in the node section):</li>
</ol>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt;  --data &quot;state=OPEN&quot; -X POST https://sandbox.waylay.io/api/tasks/4/nodes/Door</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>By specifying a resource name, as shown below (in which case waylay will push the state change to all tasks that have a node Door and a resource name that matches the one in the request):</li>
</ol>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{
        resource: &quot;room_1&quot;,
        nodes: [ {node:&quot;Door&quot;, state: &quot;OPEN&quot;}]
      }&#39; https://sandbox.waylay.io/api/data</code></pre>
<h1 id="bucket">Bucket</h1>
<p>With bucket feature you can associate a task with a resource and keep it as an item in the bucket till you want to invoke it (by resource name). You can have multiple bucket items for the same resource, and all items that match that particular resource will be invoked.</p>
<h2 id="start-bucket-items-for-resource">Start bucket item(s) for resource</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -X POST -d &#39;{}&#39; -H &quot;Content-Type:application/json&quot; https://sanbox.waylay.io/api/bucket/resources/{resource}</code></pre>
<h2 id="get-bucket-item">Get bucket item</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; https://sandbox.waylay.io/api/bucket/items/1</code></pre>
<h2 id="delete-bucket-item">Delete bucket item</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt;  -X DELETE  https://sandbox.waylay.io/api/bucket/items/1</code></pre>
<h2 id="create-bucket-item">Create bucket item</h2>
<pre><code>curl --user &lt;KEY&gt;:&lt;SECRET&gt; -H &quot;Content-Type:application/json&quot; -X POST -d &#39;{&quot;name&quot;: &quot;test4&quot;, &quot;template&quot;: &quot;internet.json&quot;, &quot;resource&quot;: &quot;hello&quot;, &quot;start&quot;: false, &quot;type&quot;: &quot;scheduled&quot;, &quot;cron&quot;: &quot;0/30 * * * * ?&quot;, &quot;nodes&quot;: [{&quot;name&quot;: &quot;Ping_1&quot;, &quot;properties&quot;: {&quot;sensor&quot;: {&quot;name&quot;: &quot;Ping&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;label&quot;: &quot;Ping_1&quot;, &quot;requiredProperties&quot;: [{&quot;address&quot;: &quot;www.waylay.io&quot;} ] } } }, {&quot;name&quot;: &quot;Ping_2&quot;, &quot;properties&quot;: {&quot;sensor&quot;: {&quot;name&quot;: &quot;Ping&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;label&quot;: &quot;Ping_2&quot;, &quot;requiredProperties&quot;: [{&quot;address&quot;: &quot;sandbox.waylay.io&quot;} ] } } }, {&quot;name&quot;: &quot;Ping_3&quot;, &quot;properties&quot;: {&quot;sensor&quot;: {&quot;name&quot;: &quot;Ping&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;label&quot;: &quot;Ping_3&quot;, &quot;requiredProperties&quot;: [{&quot;address&quot;: &quot;www.google.com&quot;} ] } } } ] }&#39; https://sandbox.waylay.io/api/bucket/items</code></pre>
<a href="#" class="scrollup"><a href="http://docs.waylay.io/"></a></a>

</div>
        </div>
                </div>
     <footer class="text-center">

        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-xs-9 pull-right">
                        Copyright &copy; waylay.io 2015
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="js/jquery-ui-1.9.1.custom.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.tocify.min.js"></script>
    <script src="js/prettify.js"></script>
    <script src="js/tinynav.min.js"></script>
    <script src="js/freelancer.js"></script>
</body>

</html>

